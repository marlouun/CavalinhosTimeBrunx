<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Corrida de Vendas | Cavalinhos</title>
    <link rel="shortcut icon" href="assets/Images/Favicon.png" type="image/x-icon">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Fontes Divertidas do Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Fredoka:wght@400;600&display=swap" rel="stylesheet">

    <!-- Animate.css para anima√ß√µes de entrada -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

    <link href="assets/style.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script>

    <!-- Confetti JS para celebra√ß√£o -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        .btn-mes {
            font-family: 'Bangers', cursive;
            letter-spacing: 1px;
            font-size: 1.2rem;
            border: 2px solid #000;
            box-shadow: 3px 3px 0 #000;
            transition: transform 0.1s;
        }
        .btn-mes:active {
            transform: translate(2px, 2px);
            box-shadow: 1px 1px 0 #000;
        }
        .btn-mes.active {
            background-color: #ff9900 !important;
            color: #fff !important;
            transform: translate(2px, 2px);
            box-shadow: 1px 1px 0 #000;
        }
        .dropdown-mes {
            font-family: 'Bangers', cursive;
            letter-spacing: 1px;
            font-size: 1.2rem;
            border: 2px solid #000;
            box-shadow: 3px 3px 0 #000;
        }
    </style>
</head>
<body>

<nav class="navbar mb-3">
    <div class="container-fluid d-flex flex-column flex-md-row justify-content-center align-items-center position-relative">
        <img src="assets/Images/LogoBrunxBranca.png" alt="Logo Brunx" height="60" class="d-none d-md-block position-absolute start-0 ms-3 top-50 translate-middle-y animate__animated animate__rubberBand">
        <img src="assets/Images/LogoBrunxBranca.png.png" alt="Logo Brunx" height="60" class="d-block d-md-none mb-2 animate__animated animate__rubberBand">
        <span class="navbar-brand mb-0 h1 animate__animated animate__pulse animate__infinite">üèÅ GP do Atacado üèÅ</span>
    </div>
</nav>

<div class="container">
    <!-- Menu de Meses -->
    <div class="row justify-content-center mb-3">
        <div class="col-auto">
            <select class="form-select dropdown-mes" id="select-mes" onchange="mudarMes(this.value)">
                <option value="geral">üèÜ GERAL (ANO)</option>
                <option value="jan">üìÖ JANEIRO</option>
                <option value="fev" selected>üìÖ FEVEREIRO</option>
            </select>
        </div>
    </div>

    <!-- Bot√£o Auto Scroll -->
    <div class="row justify-content-center mb-4">
        <div class="col-auto">
            <button class="btn btn-danger btn-mes" id="btn-autoscroll" onclick="toggleAutoScroll()">üõë Scroll: OFF</button>
        </div>
    </div>

    <div class="row justify-content-center">
        <div class="col-md-10">
            <div class="narrador-box animate__animated animate__bounceInDown">
                <p class="narrador-texto" id="narracao-texto">Carregando as emo√ß√µes...</p>
            </div>
        </div>
    </div>

    <div id="loading" class="text-center my-5">
        <div class="spinner-border text-light" style="width: 3rem; height: 3rem;" role="status"></div>
        <p class="mt-2 text-white fw-bold fs-4" style="font-family: 'Bangers'">Aquecendo os motores...</p>
    </div>

    <div id="dashboard-content" style="display: none;" class="animate__animated animate__fadeIn">
        <!-- KPIs -->
        <div class="row mb-4">
            <div class="col-md-4 mb-3">
                <div class="card p-3 h-100 kpi-card-custom border-success">
                    <div class="kpi-titulo">üí∞ Faturamento <span id="kpi-titulo-mes"></span></div>
                    <div class="kpi-valor text-success" id="kpi-total">R$ 0,00</div>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="card p-3 h-100 kpi-card-custom border-warning">
                    <div class="kpi-titulo">üèÜ L√≠der da Prova</div>
                    <div class="kpi-valor text-warning" id="kpi-top-vendedor">-</div>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="card p-3 h-100 kpi-card-custom border-primary">
                    <div class="kpi-titulo">üìÖ Atualiza√ß√£o</div>
                    <div class="kpi-valor text-primary" style="font-size: 1.5rem; margin-top: 10px;" id="data-atualizacao">-</div>
                </div>
            </div>
        </div>

        <!-- Hist√≥rico de Ultrapassagens -->
        <div class="row justify-content-center mb-4">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header fw-bold text-center" style="font-family: 'Bangers'; font-size: 1.3rem; background-color: #f0f0f0;">
                        üèÅ Hist√≥rico de Ultrapassagens üèÅ
                    </div>
                    <div id="historico-ultrapassagens" style="font-family: 'Fredoka';">
                        <!-- Conte√∫do gerado via JS -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Corrida (Largura Total) -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card p-4 h-100">
                    <h3 class="text-center mb-4" style="color: #4CAF50; text-shadow: 2px 2px 0 #000;">üèá A Grande Corrida</h3>
                    <div class="pista-container" id="pista-corrida">
                        <div class="linha-chegada"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Gr√°fico de Pizza e Tabela -->
        <div class="row">
            <!-- Gr√°fico de Pizza -->
            <div class="col-lg-6 mb-4">
                <div class="card p-4 h-100">
                    <h3 class="text-center mb-4" style="color: #FF6384; text-shadow: 2px 2px 0 #000;">üçï Fatias do Mercado</h3>
                    <div style="position: relative; height:350px; width:100%">
                        <canvas id="pieChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Tabela de Classifica√ß√£o -->
            <div class="col-lg-6 mb-4">
                <div class="card p-4 h-100">
                    <h3 class="text-center mb-4" style="color: #333;">üìä Tabela de Classifica√ß√£o</h3>
                    <div class="table-responsive">
                        <table class="table align-middle" id="tabela-classificacao">
                            <thead>
                                <tr>
                                    <th scope="col" class="text-center" style="width: 80px;">Pos</th>
                                    <th scope="col">J√≥quei</th>
                                    <th scope="col" class="text-end">Faturamento</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Linhas geradas via JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<footer class="text-center py-3 mt-4">
    <p class="mb-0 text-white fw-bold" style="font-family: 'Fredoka'; text-shadow: 1px 1px 2px #000;">
        &copy; 2026 Todos os direitos reservados - Desenvolvido por Marlon Albino
    </p>
</footer>

<!-- Painel Lateral (Offcanvas) do Jogador -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="painelPerfil" aria-labelledby="painelPerfilLabel">
    <div class="offcanvas-header" style="background: linear-gradient(90deg, #ff9900 0%, #ff5e00 100%); color: white;">
        <h5 class="offcanvas-title" id="painelPerfilLabel" style="font-family: 'Bangers'; letter-spacing: 1px; font-size: 1.5rem;">Perfil do J√≥quei</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body text-center" style="background-color: #f8f9fa;">

        <div class="mb-4 position-relative d-inline-block">
            <img id="perfil-img" src="" class="rounded-circle border border-4 border-dark shadow" style="width: 150px; height: 150px; object-fit: cover; background: white;">
            <span id="perfil-posicao-badge" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger border border-2 border-white" style="font-size: 1.2rem;">
                1¬∫
            </span>
        </div>

        <h2 id="perfil-nome" class="mb-1" style="font-family: 'Bangers'; color: #333;">Nome do Jogador</h2>
        <h4 id="perfil-time" class="mb-4 text-muted" style="font-family: 'Fredoka';">Time</h4>

        <div class="card mb-3 border-primary shadow-sm">
            <div class="card-body">
                <h5 class="card-title text-primary" style="font-family: 'Bangers';">Situa√ß√£o na Pista</h5>
                <p class="card-text fs-5" id="perfil-frase-situacao" style="font-family: 'Fredoka';">Frase sobre a posi√ß√£o...</p>
            </div>
        </div>

        <div class="card border-success shadow-sm">
            <div class="card-body">
                <h5 class="card-title text-success" style="font-family: 'Bangers';">Motiva√ß√£o do Dia</h5>
                <p class="card-text fst-italic fs-5" id="perfil-frase-motivacao" style="font-family: 'Fredoka';">"Frase motivacional aqui..."</p>
            </div>
        </div>

    </div>
</div>

<!-- Bootstrap JS Bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="assets/script.js"></script>

</body>
</html>